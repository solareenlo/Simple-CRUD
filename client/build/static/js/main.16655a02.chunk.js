(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a(46)},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),i=a.n(c),o=a(4),u=a(15),E=a(16),l=a(19),s=a(17),h=a(20),p=a(2),d=a.n(p),A=function(e){return{type:"RECEIVE_DATA_SUCCESS",characterArray:e}},m=function(e){var t=e.store,a=t.getState().form,n=a.name,c=a.age;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),t.dispatch({type:"REQUEST_DATA"}),d.a.post("/api/characters",{name:n,age:c}).then(function(e){t.dispatch({type:"INITIALIZE_FORM"});var a=e.data;t.dispatch(A(a))}).catch(function(e){console.error(new Error(e)),t.dispatch({type:"RECEIVE_DATA_FAILED"})})}(e)}},r.a.createElement("label",null,"\u540d\u524d:",r.a.createElement("input",{value:n,onChange:function(e){return t.dispatch({type:"CHANGE_NAME",name:e.target.value})}})),r.a.createElement("label",null,"\u5e74\u9f62:",r.a.createElement("input",{value:c,onChange:function(e){return t.dispatch({type:"CHANGE_AGE",age:e.target.value})}})),r.a.createElement("button",{type:"submit"},"submit")))},f=function(e){var t=e.store,a=t.getState().characters,n=a.isFetching,c=a.characterArray;return r.a.createElement("div",null,n?r.a.createElement("h2",null,"Now Loading..."):r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return t.dispatch({type:"REQUEST_DATA"}),void d.a.get("/api/characters").then(function(e){var a=e.data;t.dispatch(A(a))}).catch(function(e){console.error(new Error(e)),t.dispatch({type:"RECEIVE_DATA_FAILED"})})}},"fetch data"),r.a.createElement("ul",null,c.map(function(e){return r.a.createElement("li",{key:e._id},"".concat(e.name," (").concat(e.age,")"),r.a.createElement("button",{onClick:function(){return a=e._id,t.dispatch({type:"REQUEST_DATA"}),void d.a.put("/api/characters",{id:a}).then(function(e){var a=e.data;t.dispatch(A(a))}).catch(function(e){console.error(new Error(e)),t.dispatch({type:"RECEIVE_DATA_FAILED"})});var a}},"+1"),r.a.createElement("button",{onClick:function(){return a=e._id,t.dispatch({type:"REQUEST_DATA"}),void d()({method:"delete",url:"/api/characters",data:{id:a}}).then(function(e){var a=e.data;t.dispatch(A(a))}).catch(function(e){console.error(new Error(e)),t.dispatch({type:"RECEIVE_DATA_FAILED"})});var a}},"delete"))}))))},v=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m,{store:this.props.store}),r.a.createElement(f,{store:this.props.store}))}}]),t}(n.Component),_=a(3),b={form:{name:"",age:""},characters:{isFetching:!1,characterArray:[]}},g=Object(o.a)({form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.form,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NAME":return Object(_.a)({},e,{name:t.name});case"CHANGE_AGE":return Object(_.a)({},e,{age:t.age});case"INITIALIZE_FORM":return b.form;default:return e}},characters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.characters,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_DATA":return Object(_.a)({},e,{isFetching:!0});case"RECEIVE_DATA_SUCCESS":return Object(_.a)({},e,{isFetching:!1,characterArray:t.characterArray});case"RECEIVE_DATA_FAILED":return Object(_.a)({},e,{isFetching:!1});default:return e}}}),y=Object(o.b)(g),C=function(){i.a.render(r.a.createElement(v,{store:y}),document.getElementById("root"))};y.subscribe(function(){C()}),C()}},[[21,2,1]]]);
//# sourceMappingURL=main.16655a02.chunk.js.map